[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar _ = Package.underscore._;\nvar $ = Package.jquery.$;\nvar jQuery = Package.jquery.jQuery;\nvar Template = Package.templating.Template;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////\n//                                                                              //\n// packages/barbatus_stars-rating/template.stars_rating.js                      //\n//                                                                              //\n//////////////////////////////////////////////////////////////////////////////////\n                                                                                //\n                                                                                // 1\nTemplate.__checkName(\"starsRating\");                                            // 2\nTemplate[\"starsRating\"] = new Template(\"Template.starsRating\", (function() {    // 3\n  var view = this;                                                              // 4\n  return HTML.DIV({                                                             // 5\n    id: function() {                                                            // 6\n      return Spacebars.mustache(view.lookup(\"getId\"));                          // 7\n    },                                                                          // 8\n    \"class\": function() {                                                       // 9\n      return [ \"stars-rating \", Spacebars.mustache(view.lookup(\"class\")), \" \", Spacebars.mustache(view.lookup(\"css\"), view.lookup(\"size\")) ];\n    },                                                                          // 11\n    style: function() {                                                         // 12\n      return Spacebars.mustache(view.lookup(\"font\"), view.lookup(\"size\"));      // 13\n    },                                                                          // 14\n    \"data-rating\": function() {                                                 // 15\n      return Spacebars.mustache(view.lookup(\"rating\"));                         // 16\n    },                                                                          // 17\n    star: function() {                                                          // 18\n      return Spacebars.mustache(view.lookup(\"star\"));                           // 19\n    }                                                                           // 20\n  }, \"\\n        \", HTML.DIV({                                                   // 21\n    \"class\": \"stars-inner-wrap\"                                                 // 22\n  }, \"\\n            \", Blaze._TemplateWith(function() {                         // 23\n    return {                                                                    // 24\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),                       // 25\n      size: Spacebars.call(5)                                                   // 26\n    };                                                                          // 27\n  }, function() {                                                               // 28\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));                    // 29\n  }), \"\\n            \", Blaze._TemplateWith(function() {                        // 30\n    return {                                                                    // 31\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),                       // 32\n      size: Spacebars.call(4)                                                   // 33\n    };                                                                          // 34\n  }, function() {                                                               // 35\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));                    // 36\n  }), \"\\n            \", Blaze._TemplateWith(function() {                        // 37\n    return {                                                                    // 38\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),                       // 39\n      size: Spacebars.call(3)                                                   // 40\n    };                                                                          // 41\n  }, function() {                                                               // 42\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));                    // 43\n  }), \"\\n            \", Blaze._TemplateWith(function() {                        // 44\n    return {                                                                    // 45\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),                       // 46\n      size: Spacebars.call(2)                                                   // 47\n    };                                                                          // 48\n  }, function() {                                                               // 49\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));                    // 50\n  }), \"\\n            \", Blaze._TemplateWith(function() {                        // 51\n    return {                                                                    // 52\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),                       // 53\n      size: Spacebars.call(1)                                                   // 54\n    };                                                                          // 55\n  }, function() {                                                               // 56\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));                    // 57\n  }), \"\\n        \"), \"\\n    \");                                                 // 58\n}));                                                                            // 59\n                                                                                // 60\nTemplate.__checkName(\"_stars\");                                                 // 61\nTemplate[\"_stars\"] = new Template(\"Template._stars\", (function() {              // 62\n  var view = this;                                                              // 63\n  return HTML.DIV({                                                             // 64\n    \"class\": \"stars\",                                                           // 65\n    \"data-stars\": function() {                                                  // 66\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"stars\"), \"length\"));\n    }                                                                           // 68\n  }, \"\\n        \", Blaze.Each(function() {                                      // 69\n    return Spacebars.call(view.lookup(\"stars\"));                                // 70\n  }, function() {                                                               // 71\n    return HTML.SPAN({                                                          // 72\n      \"class\": function() {                                                     // 73\n        return [ \"star-\", Spacebars.mustache(view.lookup(\".\")) ];               // 74\n      }                                                                         // 75\n    }, HTML.I({                                                                 // 76\n      \"class\": \"star-glyph\"                                                     // 77\n    }));                                                                        // 78\n  }), \"\\n    \");                                                                // 79\n}));                                                                            // 80\n                                                                                // 81\n//////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////\n//                                                                              //\n// packages/barbatus_stars-rating/stars_rating.js                               //\n//                                                                              //\n//////////////////////////////////////////////////////////////////////////////////\n                                                                                //\nvar rtCss = 'current-rating';                                                   // 1\nvar prCss = 'percent';                                                          // 2\nvar hasUserCss = 'has-user-rating';                                             // 3\n                                                                                // 4\nfunction getStarsEl($parent, index) {                                           // 5\n    return $parent.find('[data-stars=\"' + index + '\"]');                        // 6\n}                                                                               // 7\n                                                                                // 8\nfunction getStarEl($parent, index) {                                            // 9\n    return getStarsEl($parent, index).find('.star-' + index);                   // 10\n}                                                                               // 11\n                                                                                // 12\nfunction getStarColor($el) {                                                    // 13\n    var span = $('<span>').addClass(rtCss).appendTo($el);                       // 14\n    var starColor = span.css('color');                                          // 15\n    span.remove();                                                              // 16\n    return starColor;                                                           // 17\n}                                                                               // 18\n                                                                                // 19\nfunction getStarGlyph($el) {                                                    // 20\n    var starGlyph = $el.attr('star');                                           // 21\n                                                                                // 22\n    if (!starGlyph) {                                                           // 23\n        // For compatibility with older versions.                               // 24\n        //                                                                      // 25\n        // If now star attr is set, take the star symbol                        // 26\n        // from the upper CSS class (via content property).                     // 27\n        // This will work in most browsers except IE.                           // 28\n        starGlyph = $el.css('content');                                         // 29\n                                                                                // 30\n        if (!starGlyph || starGlyph === 'none') {                               // 31\n            starGlyph = '\\\\2605';                                               // 32\n        } else {                                                                // 33\n            // if it's IE replace glyph with the default symbol.                // 34\n            if (starGlyph === 'normal') {                                       // 35\n                starGlyph = '\\\\2605';                                           // 36\n            }                                                                   // 37\n        }                                                                       // 38\n    }                                                                           // 39\n                                                                                // 40\n    // Prepare glyph for styles.                                                // 41\n    starGlyph = '\"' + starGlyph.trim().replace(/[\\',\\\"]/g, '') + '\"';           // 42\n                                                                                // 43\n    return starGlyph;                                                           // 44\n}                                                                               // 45\n                                                                                // 46\nfunction buildStyle(className, styles) {                                        // 47\n    var styleStr = '';                                                          // 48\n    for (var style in styles) {                                                 // 49\n        styleStr += style + ':' + styles[style] + ';';                          // 50\n    }                                                                           // 51\n    return '.' + className + '{' + styleStr + '}';                              // 52\n}                                                                               // 53\n                                                                                // 54\nfunction setRating($el, rating, isUser, starGlyph) {                            // 55\n    var ceil = Math.ceil(rating);                                               // 56\n    var floor = Math.floor(rating);                                             // 57\n    var percent = rating - floor;                                               // 58\n                                                                                // 59\n    $el.find('.stars').removeClass(rtCss);                                      // 60\n    $el.find('.stars').find('.percent').removeClass(prCss);                     // 61\n                                                                                // 62\n    $el.toggleClass(hasUserCss, isUser);                                        // 63\n    for (var i = floor; i >= 0; i--) {                                          // 64\n        getStarsEl($el, i).addClass(rtCss);                                     // 65\n    }                                                                           // 66\n                                                                                // 67\n    if (percent) {                                                              // 68\n        var $percentStar = getStarEl($el, ceil).addClass(prCss);                // 69\n        var starColor = getStarColor($el);                                      // 70\n        $percentStar.find('style').remove();                                    // 71\n        var style = ['<style>#' + getOrSetTmplId(),                             // 72\n            buildStyle('percent:before', {                                      // 73\n                width: (percent * 100) + '% !important',                        // 74\n                color: starColor,                                               // 75\n                content: starGlyph}), '</style>'];                              // 76\n        $percentStar.append(style.join(' '));                                   // 77\n    }                                                                           // 78\n    $el.trigger('change');                                                      // 79\n}                                                                               // 80\n                                                                                // 81\nfunction getOrSetTmplId(opt_id) {                                               // 82\n    if (!Template.instance()._id) {                                             // 83\n        Template.instance()._id = opt_id || _.uniqueId('stars_');               // 84\n    }                                                                           // 85\n    return Template.instance()._id;                                             // 86\n}                                                                               // 87\n                                                                                // 88\nTemplate.starsRating.helpers({                                                  // 89\n    getId: function() {                                                         // 90\n        return getOrSetTmplId(this.id);                                         // 91\n    },                                                                          // 92\n    css: function(size) {                                                       // 93\n        if (_.isString(size)) {                                                 // 94\n            return 'stars-rating-' + (size || 'sm');                            // 95\n        }                                                                       // 96\n    },                                                                          // 97\n    font: function(size) {                                                      // 98\n        if (_.isNumber(size)) {                                                 // 99\n            return 'font-size:' + size + 'px';                                  // 100\n        }                                                                       // 101\n    }                                                                           // 102\n});                                                                             // 103\n                                                                                // 104\nfunction onDataChange($el, rating, starGlyph) {                                 // 105\n    setRating($el, rating, false, starGlyph);                                   // 106\n}                                                                               // 107\n                                                                                // 108\nTemplate.starsRating.rendered = function() {                                    // 109\n    var self = this;                                                            // 110\n    var $el = $(self.firstNode);                                                // 111\n                                                                                // 112\n    var starGlyph = getStarGlyph($el);                                          // 113\n                                                                                // 114\n    // Adds all required styles to set new symbol for the internal              // 115\n    // pseudo elements.                                                         // 116\n    var style = ['<style>#' + getOrSetTmplId(),                                 // 117\n        buildStyle('star-glyph:before', {                                       // 118\n            content: starGlyph}), '</style>'];                                  // 119\n    $el.append(style.join(' '));                                                // 120\n                                                                                // 121\n    this.autorun(function() {                                                   // 122\n        var userData = Template.currentData();                                  // 123\n        if (userData) {                                                         // 124\n            var rating = userData.rating;                                       // 125\n            if (rating) {                                                       // 126\n                onDataChange($el, rating, starGlyph);                           // 127\n            }                                                                   // 128\n        }                                                                       // 129\n    });                                                                         // 130\n};                                                                              // 131\n                                                                                // 132\nTemplate.starsRating.events({                                                   // 133\n    'mouseover .stars': function(event) {                                       // 134\n        if (this.isMutable || this.mutable) {                                   // 135\n            var $this = $(event.currentTarget);                                 // 136\n            var rating = $this.data('stars');                                   // 137\n                                                                                // 138\n            for (var i = rating; i >= 0; i--) {                                 // 139\n                getStarsEl($this.parent(), i).addClass('active');               // 140\n            }                                                                   // 141\n                                                                                // 142\n            for (var i = rating + 1; i <= 5; i++) {                             // 143\n                getStarsEl($this.parent(), i).removeClass('active');            // 144\n            }                                                                   // 145\n        }                                                                       // 146\n    },                                                                          // 147\n    'mouseleave .stars-rating': function(event) {                               // 148\n        if (this.isMutable || this.mutable) {                                   // 149\n            var $this = $(event.currentTarget);                                 // 150\n            $this.find('.stars').removeClass('active');                         // 151\n        }                                                                       // 152\n    },                                                                          // 153\n    'click .stars': function(event) {                                           // 154\n        if (this.isMutable || this.mutable) {                                   // 155\n            var $this = $(event.currentTarget);                                 // 156\n            var userRating = $this.data('stars');                               // 157\n            var $el = $this.parent().parent();                                  // 158\n            $el.data('userrating', userRating);                                 // 159\n                                                                                // 160\n            var $starsWrap = $this.parent();                                    // 161\n            setRating($starsWrap, userRating, true);                            // 162\n                                                                                // 163\n            $starsWrap.children().removeClass('active');                        // 164\n        }                                                                       // 165\n    }                                                                           // 166\n});                                                                             // 167\n                                                                                // 168\nTemplate.starsRating.helpers({                                                  // 169\n    getMutable: function(size) {                                                // 170\n        return this.isMutable || this.mutable;                                  // 171\n    }                                                                           // 172\n});                                                                             // 173\n                                                                                // 174\nTemplate._stars.helpers({                                                       // 175\n    stars: function() {                                                         // 176\n        return _.range(1, this.size + 1);                                       // 177\n    }                                                                           // 178\n});                                                                             // 179\n                                                                                // 180\n//////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['barbatus:stars-rating'] = {};\n\n})();\n","servePath":"/packages/barbatus_stars-rating.js","sourceMap":{"version":3,"sources":["/packages/barbatus_stars-rating/template.stars_rating.js","/packages/barbatus_stars-rating/stars_rating.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qF;;;;;;;;;;;;;;;;;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sF","file":"/packages/barbatus_stars-rating.js","sourcesContent":["\nTemplate.__checkName(\"starsRating\");\nTemplate[\"starsRating\"] = new Template(\"Template.starsRating\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: function() {\n      return Spacebars.mustache(view.lookup(\"getId\"));\n    },\n    \"class\": function() {\n      return [ \"stars-rating \", Spacebars.mustache(view.lookup(\"class\")), \" \", Spacebars.mustache(view.lookup(\"css\"), view.lookup(\"size\")) ];\n    },\n    style: function() {\n      return Spacebars.mustache(view.lookup(\"font\"), view.lookup(\"size\"));\n    },\n    \"data-rating\": function() {\n      return Spacebars.mustache(view.lookup(\"rating\"));\n    },\n    star: function() {\n      return Spacebars.mustache(view.lookup(\"star\"));\n    }\n  }, \"\\n        \", HTML.DIV({\n    \"class\": \"stars-inner-wrap\"\n  }, \"\\n            \", Blaze._TemplateWith(function() {\n    return {\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),\n      size: Spacebars.call(5)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));\n  }), \"\\n            \", Blaze._TemplateWith(function() {\n    return {\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),\n      size: Spacebars.call(4)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));\n  }), \"\\n            \", Blaze._TemplateWith(function() {\n    return {\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),\n      size: Spacebars.call(3)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));\n  }), \"\\n            \", Blaze._TemplateWith(function() {\n    return {\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),\n      size: Spacebars.call(2)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));\n  }), \"\\n            \", Blaze._TemplateWith(function() {\n    return {\n      mutable: Spacebars.call(view.lookup(\"getMutable\")),\n      size: Spacebars.call(1)\n    };\n  }, function() {\n    return Spacebars.include(view.lookupTemplate(\"_stars\"));\n  }), \"\\n        \"), \"\\n    \");\n}));\n\nTemplate.__checkName(\"_stars\");\nTemplate[\"_stars\"] = new Template(\"Template._stars\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"stars\",\n    \"data-stars\": function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"stars\"), \"length\"));\n    }\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"stars\"));\n  }, function() {\n    return HTML.SPAN({\n      \"class\": function() {\n        return [ \"star-\", Spacebars.mustache(view.lookup(\".\")) ];\n      }\n    }, HTML.I({\n      \"class\": \"star-glyph\"\n    }));\n  }), \"\\n    \");\n}));\n","var rtCss = 'current-rating';\nvar prCss = 'percent';\nvar hasUserCss = 'has-user-rating';\n\nfunction getStarsEl($parent, index) {\n    return $parent.find('[data-stars=\"' + index + '\"]');\n}\n\nfunction getStarEl($parent, index) {\n    return getStarsEl($parent, index).find('.star-' + index);\n}\n\nfunction getStarColor($el) {\n    var span = $('<span>').addClass(rtCss).appendTo($el);\n    var starColor = span.css('color');\n    span.remove();\n    return starColor;\n}\n\nfunction getStarGlyph($el) {\n    var starGlyph = $el.attr('star');\n\n    if (!starGlyph) {\n        // For compatibility with older versions.\n        //\n        // If now star attr is set, take the star symbol\n        // from the upper CSS class (via content property).\n        // This will work in most browsers except IE.\n        starGlyph = $el.css('content');\n\n        if (!starGlyph || starGlyph === 'none') {\n            starGlyph = '\\\\2605';\n        } else {\n            // if it's IE replace glyph with the default symbol.\n            if (starGlyph === 'normal') {\n                starGlyph = '\\\\2605';\n            }\n        }\n    }\n\n    // Prepare glyph for styles.\n    starGlyph = '\"' + starGlyph.trim().replace(/[\\',\\\"]/g, '') + '\"';\n\n    return starGlyph;\n}\n\nfunction buildStyle(className, styles) {\n    var styleStr = '';\n    for (var style in styles) {\n        styleStr += style + ':' + styles[style] + ';';\n    }\n    return '.' + className + '{' + styleStr + '}';\n}\n\nfunction setRating($el, rating, isUser, starGlyph) {\n    var ceil = Math.ceil(rating);\n    var floor = Math.floor(rating);\n    var percent = rating - floor;\n\n    $el.find('.stars').removeClass(rtCss);\n    $el.find('.stars').find('.percent').removeClass(prCss);\n\n    $el.toggleClass(hasUserCss, isUser);\n    for (var i = floor; i >= 0; i--) {\n        getStarsEl($el, i).addClass(rtCss);\n    }\n\n    if (percent) {\n        var $percentStar = getStarEl($el, ceil).addClass(prCss);\n        var starColor = getStarColor($el);\n        $percentStar.find('style').remove();\n        var style = ['<style>#' + getOrSetTmplId(),\n            buildStyle('percent:before', {\n                width: (percent * 100) + '% !important',\n                color: starColor,\n                content: starGlyph}), '</style>'];\n        $percentStar.append(style.join(' '));\n    }\n    $el.trigger('change');\n}\n\nfunction getOrSetTmplId(opt_id) {\n    if (!Template.instance()._id) {\n        Template.instance()._id = opt_id || _.uniqueId('stars_');\n    }\n    return Template.instance()._id;\n}\n\nTemplate.starsRating.helpers({\n    getId: function() {\n        return getOrSetTmplId(this.id);\n    },\n    css: function(size) {\n        if (_.isString(size)) {\n            return 'stars-rating-' + (size || 'sm');\n        }\n    },\n    font: function(size) {\n        if (_.isNumber(size)) {\n            return 'font-size:' + size + 'px';\n        }\n    }\n});\n\nfunction onDataChange($el, rating, starGlyph) {\n    setRating($el, rating, false, starGlyph);\n}\n\nTemplate.starsRating.rendered = function() {\n    var self = this;\n    var $el = $(self.firstNode);\n\n    var starGlyph = getStarGlyph($el);\n\n    // Adds all required styles to set new symbol for the internal\n    // pseudo elements.\n    var style = ['<style>#' + getOrSetTmplId(),\n        buildStyle('star-glyph:before', {\n            content: starGlyph}), '</style>'];\n    $el.append(style.join(' '));\n\n    this.autorun(function() {\n        var userData = Template.currentData();\n        if (userData) {\n            var rating = userData.rating;\n            if (rating) {\n                onDataChange($el, rating, starGlyph);\n            }\n        }\n    });\n};\n\nTemplate.starsRating.events({\n    'mouseover .stars': function(event) {\n        if (this.isMutable || this.mutable) {\n            var $this = $(event.currentTarget);\n            var rating = $this.data('stars');\n\n            for (var i = rating; i >= 0; i--) {\n                getStarsEl($this.parent(), i).addClass('active');\n            }\n\n            for (var i = rating + 1; i <= 5; i++) {\n                getStarsEl($this.parent(), i).removeClass('active');\n            }\n        }\n    },\n    'mouseleave .stars-rating': function(event) {\n        if (this.isMutable || this.mutable) {\n            var $this = $(event.currentTarget);\n            $this.find('.stars').removeClass('active');\n        }\n    },\n    'click .stars': function(event) {\n        if (this.isMutable || this.mutable) {\n            var $this = $(event.currentTarget);\n            var userRating = $this.data('stars');\n            var $el = $this.parent().parent();\n            $el.data('userrating', userRating);\n\n            var $starsWrap = $this.parent();\n            setRating($starsWrap, userRating, true);\n\n            $starsWrap.children().removeClass('active');\n        }\n    }\n});\n\nTemplate.starsRating.helpers({\n    getMutable: function(size) {\n        return this.isMutable || this.mutable;\n    }\n});\n\nTemplate._stars.helpers({\n    stars: function() {\n        return _.range(1, this.size + 1);\n    }\n});\n"]}}]